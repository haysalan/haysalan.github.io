{
    "version": "https://jsonfeed.org/version/1",
    "title": "Faceless Blog • All posts by \"抓包\" tag",
    "description": "数据采集、逆向安全、网络杂谈",
    "home_page_url": "https://haysalan.github.io",
    "items": [
        {
            "id": "https://haysalan.github.io/posts/43239.html",
            "url": "https://haysalan.github.io/posts/43239.html",
            "title": "charles移动&PC抓包配置",
            "date_published": "2023-12-14T05:59:32.000Z",
            "content_html": "<h1 id=\"安装-charles\"><a class=\"markdownIt-Anchor\" href=\"#安装-charles\">#</a> 安装 charles</h1>\n<p>官网下载：<a href=\"https://www.charlesproxy.com/download/\">https://www.charlesproxy.com/download/</a></p>\n<h1 id=\"电脑抓包\"><a class=\"markdownIt-Anchor\" href=\"#电脑抓包\">#</a> 电脑抓包</h1>\n<p>安装好证书，打开 charles 这开启端口抓包，可设置 PC 系统代理来抓包数据，但通常不推荐这么做，推荐使用<a href=\"https://microsoftedge.microsoft.com/addons/detail/fdbloeknjpnloaggplaobopplkdhnikc\"> Proxy SwitchyOmega</a> （Edge 插件 | chrome 也有此插件）来进行浏览器抓包。</p>\n<h2 id=\"代理设置\"><a class=\"markdownIt-Anchor\" href=\"#代理设置\">#</a> 代理设置</h2>\n<p>操作：Proxy -&gt; Proxy Settings 1. 勾选 Enable tranaparent HTTP proxying 2. 勾选 Enable SOCKS proxy</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2023/png/26634545/1702542982696-ff3a7b7a-cb54-45f2-9240-15a56ef773de.png#averageHue=%23eeedec&amp;clientId=u81dbcc76-2115-4&amp;from=paste&amp;height=466&amp;id=u1a21edff&amp;originHeight=699&amp;originWidth=813&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=39284&amp;status=done&amp;style=none&amp;taskId=u10dc5636-6596-47fb-a940-a83a8f00c23&amp;title=&amp;width=542\" alt=\"image.png\"></p>\n<h2 id=\"抓取端口设置\"><a class=\"markdownIt-Anchor\" href=\"#抓取端口设置\">#</a> 抓取端口设置</h2>\n<p>操作：Proxy -&gt; <a href=\"https://so.csdn.net/so/search?q=SSL&amp;spm=1001.2101.3001.7020\">SSL</a> Proxying Settings 1. 勾选 Enable SSL Proxying 2. 点击 Add，添加抓取端口</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2023/png/26634545/1702542919357-abd6010c-5334-4b49-9366-46eb366e5ad5.png#averageHue=%23ebeae9&amp;clientId=u81dbcc76-2115-4&amp;from=paste&amp;height=438&amp;id=u20559f8c&amp;originHeight=657&amp;originWidth=813&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=61836&amp;status=done&amp;style=none&amp;taskId=u63c04ad3-1aa3-44e5-a2e7-a9c0e2dda23&amp;title=&amp;width=542\" alt=\"image.png\"></p>\n<h2 id=\"安装证书\"><a class=\"markdownIt-Anchor\" href=\"#安装证书\">#</a> 安装证书</h2>\n<p>操作：Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate -&gt; 安装证书 -&gt; 本地计算机 -&gt; 将所有的证书都放入下列存储 -&gt; 点击浏览，选择” 受信任的根证书颁发机构” -&gt; 完成</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2023/gif/26634545/1702542740132-c2b41f8f-4bd4-4534-9f3a-7bd6e3e3d394.gif#averageHue=%23efefeb&amp;clientId=u81dbcc76-2115-4&amp;from=drop&amp;id=ueca600f2&amp;originHeight=1197&amp;originWidth=1980&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=2581990&amp;status=done&amp;style=none&amp;taskId=u9846250a-e561-479a-bcd4-5d345d04fb2&amp;title=\" alt=\"PixPin_2023-12-14_16-31-31.gif\"></p>\n<h1 id=\"移动抓包\"><a class=\"markdownIt-Anchor\" href=\"#移动抓包\">#</a> 移动抓包</h1>\n<p>手机和 PC 处于同一网络下，将 charles<strong> 证书</strong>安装至<strong>系统</strong>（安卓 7 以下不用），配置<strong> WiFi 代理</strong>或者<strong> clash 代理转发</strong>，如此即可在 PC 上抓到手机流量包了。</p>\n<h2 id=\"安装证书-2\"><a class=\"markdownIt-Anchor\" href=\"#安装证书-2\">#</a> 安装证书</h2>\n<p>准备安装 android 证书，按照下方步骤，显示图片弹窗后进行下一步。<br>\n<strong>Help</strong>-&gt; <strong>SSL Proxying</strong> -&gt;<strong>Install Charles Root Certificate On a Mobile Device</strong>。<br>\n<img src=\"https://cdn.nlark.com/yuque/0/2023/png/26634545/1703312970820-c7e0626a-d8c1-4be9-8f91-036c35357056.png#averageHue=%23e7e5e3&amp;clientId=uef12f301-3e43-4&amp;from=paste&amp;height=170&amp;id=u5cc1829c&amp;originHeight=255&amp;originWidth=814&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=26000&amp;status=done&amp;style=none&amp;taskId=ue3ce1d79-7a01-4302-af17-d1841650ceb&amp;title=&amp;width=542.6666666666666\" alt=\"image.png\"><br>\n 手机浏览器输入地址 <a href=\"http://chls.pro/ssl\">http://chls.pro/ssl</a> 下载 crt 证书<br>\n<img src=\"https://cdn.nlark.com/yuque/0/2023/png/26634545/1702535270215-e71cd701-5988-4f3b-a89f-29b9bf53ed72.png#averageHue=%239a9ca4&amp;clientId=ufc930610-f89c-4&amp;from=paste&amp;height=819&amp;id=Mcxwp&amp;originHeight=1228&amp;originWidth=591&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=103675&amp;status=done&amp;style=none&amp;taskId=ubec0b902-275a-48bc-a551-3a86ba9f403&amp;title=&amp;width=394\" alt=\"image.png\"></p>\n<p>安装证书详细步骤：<a href=\"/2023/12/20/yuque/android%E8%AF%81%E4%B9%A6%E5%AE%89%E8%A3%85%E4%B8%8E%E6%A0%A1%E9%AA%8C%E7%9B%B8%E5%85%B3%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95\">android 证书安装与校验相关解决办法</a></p>\n<h2 id=\"手动设置代理\"><a class=\"markdownIt-Anchor\" href=\"#手动设置代理\">#</a> 手动设置代理</h2>\n<p>代理主机：<strong>PC</strong> 的 IP 地址，我这里是<strong> WiFi</strong> 所以是<strong> WLAN</strong> 的<strong> IPv4</strong> 地址。<br>\n代理端口：<strong>charles -&gt; Proxy -&gt; ProxySettings -&gt; Proxies</strong> 页面中的 <strong>HTTP Proxy -&gt; Port</strong> ，<strong>默认</strong>为<strong> 8888</strong>。</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2023/png/26634545/1702535694493-ac598886-d284-4c1f-afe7-eb1f2442bc2f.png#averageHue=%23817e7d&amp;clientId=ufc930610-f89c-4&amp;from=paste&amp;height=741&amp;id=ue0569354&amp;originHeight=1111&amp;originWidth=1794&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=287946&amp;status=done&amp;style=none&amp;taskId=ue22ead4e-85ab-48ed-b5aa-d597a7d05af&amp;title=&amp;width=1196\" alt=\"image.png\"></p>\n<h2 id=\"clash-配置代理转发\"><a class=\"markdownIt-Anchor\" href=\"#clash-配置代理转发\">#</a> clash 配置代理转发</h2>\n<p>打开 clash 依次点击 <strong>配置 -&gt; 加号 -&gt; 文件 -&gt; 浏览文件 -&gt; 配置文件</strong>，选择 MT 管理器打开，将下面代码<strong>根据注释修改</strong>后粘贴进去，保存好，启动服务即可。（下方有操作 gif）</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mixed-port:</span> <span class=\"number\">7890</span></span><br><span class=\"line\"><span class=\"attr\">allow-lan:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">mode:</span> <span class=\"string\">global</span></span><br><span class=\"line\"><span class=\"attr\">log-level:</span> <span class=\"string\">info</span></span><br><span class=\"line\"><span class=\"attr\">external-controller:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"string\">:9090</span></span><br><span class=\"line\"><span class=\"attr\">proxies:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;proxy_http&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">http</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.199</span> <span class=\"comment\"># 代理主机</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">8888</span> <span class=\"comment\"># http代理端口</span></span><br><span class=\"line\">    <span class=\"attr\">udp:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;proxy_socks5&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">socks5</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.199</span> <span class=\"comment\"># 代理主机</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">8889</span> <span class=\"comment\"># socks代理端口</span></span><br><span class=\"line\">    <span class=\"attr\">udp:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">proxy-groups:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">rules:</span></span><br></pre></td></tr></table></figure>\n<p>配置名称随意，启动后记得选择代理模式哦！<br>\n<img src=\"https://cdn.nlark.com/yuque/0/2023/gif/26634545/1702537855126-591ef863-1e1b-4d96-853a-69762b62290b.gif#averageHue=%23ecebec&amp;clientId=ufc930610-f89c-4&amp;from=drop&amp;id=u5fc3d2e3&amp;originHeight=1228&amp;originWidth=591&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=3818248&amp;status=done&amp;style=none&amp;taskId=u4df31eeb-7401-42c3-95f4-02a5f80b311&amp;title=\" alt=\"PixPin_2023-12-14_15-10-03.gif\"></p>\n",
            "tags": [
                "charles",
                "抓包"
            ]
        }
    ]
}