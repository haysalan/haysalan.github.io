{
    "version": "https://jsonfeed.org/version/1",
    "title": "Faceless Blog • All posts by \"build\" tag",
    "description": "数据采集、逆向安全、网络杂谈",
    "home_page_url": "https://haysalan.github.io",
    "items": [
        {
            "id": "https://haysalan.github.io/posts/38694.html",
            "url": "https://haysalan.github.io/posts/38694.html",
            "title": "Build Nodejs 环境配置",
            "date_published": "2024-01-03T07:34:02.000Z",
            "content_html": "<h1 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\">#</a> 前言</h1>\n<p>对于 js 补浏览器环境时遇到一些 js 无法实现的环境，那么就需要修改 node 源码来实现，本文简单复述一下 Build Node 所需要的环境及配置，推荐直接看<a href=\"https://github.com/nodejs/node/blob/HEAD/BUILDING.md\">官方文档</a>。</p>\n<h1 id=\"windows-1011\"><a class=\"markdownIt-Anchor\" href=\"#windows-1011\">#</a> windows 10/11</h1>\n<h2 id=\"环境准备\"><a class=\"markdownIt-Anchor\" href=\"#环境准备\">#</a> 环境准备</h2>\n<blockquote>\n<p><a href=\"https://github.com/nodejs/node/blob/main/BUILDING.md#windows\">windows 部分官方教程（推荐）</a></p>\n</blockquote>\n<h3 id=\"一-python-环境\"><a class=\"markdownIt-Anchor\" href=\"#一-python-环境\">#</a> 一、Python 环境</h3>\n<p>安装好 python 并且配置环境变量，官网下载（<a href=\"https://www.python.org/downloads/\">点击下载</a>）我使用的版本是 3.8.0，低版本不知道是否可用，如果第一次安装 Python 建议安装 3.8.0 及以上。<br>\n如果下载速度慢，可点击<a href=\"https://surans.lanzouw.com/b00y05wvi\">链接（密码：h85c）</a>下载我拷贝到蓝奏云文件。</p>\n<h3 id=\"二-visual-studio-installer\"><a class=\"markdownIt-Anchor\" href=\"#二-visual-studio-installer\">#</a> <strong>二、Visual Studio Installer</strong></h3>\n<p><strong>安装 C++/.NET 环境有两个可选方案</strong> 1. 安装<a href=\"https://visualstudio.microsoft.com/downloads/\"> Visual Studio 2022</a> 并且勾选 “使用 C++ 进行桌面开发” 和 “.NET 桌面生成工具” 进行环境安装。(推荐)<br>\n<img src=\"https://cdn.nlark.com/yuque/0/2024/png/26634545/1704271697464-b1f8bde9-2952-4f6c-91a2-87734409773a.png#averageHue=%23f6f6f6&amp;clientId=u118ac858-2e95-4&amp;from=paste&amp;height=226&amp;id=ua286dd38&amp;originHeight=339&amp;originWidth=623&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=30683&amp;status=done&amp;style=none&amp;taskId=u7d40a80e-757a-42f1-b4c2-e59071004fb&amp;title=&amp;width=415.3333333333333\" alt=\"image.png\"></p>\n<p>2. 安装<a href=\"https://aka.ms/vs/17/release/vs_buildtools.exe\">构建工具</a>打开后自动安装 “C++ 构建工具” 环境等待安装完成后打开 <strong>Visual Studio Installer</strong> 勾选 “.NET 桌面生成工具” 进行环境安装。<br>\n<img src=\"https://cdn.nlark.com/yuque/0/2024/png/26634545/1704270358817-7e442e02-b5b5-4901-82d1-525aa2c60c9c.png#averageHue=%23f4f4f4&amp;clientId=ud662e875-ea93-4&amp;from=paste&amp;height=282&amp;id=u6feb1e41&amp;originHeight=423&amp;originWidth=720&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=17211&amp;status=done&amp;style=none&amp;taskId=u6d5b157d-079c-40a7-815a-a6b0a00aacb&amp;title=&amp;width=480\" alt=\"image.png\"></p>\n<h3 id=\"三-netwide-汇编程序\"><a class=\"markdownIt-Anchor\" href=\"#三-netwide-汇编程序\">#</a> 三、NetWide 汇编程序</h3>\n<p>点击<a href=\"https://www.nasm.us/pub/nasm/releasebuilds/2.16.02rc6/win64/\">这里</a>下载后安装即可，安装是一直点 next 即可。<br>\n我安装的版本是<a href=\"https://www.nasm.us/pub/nasm/releasebuilds/2.16.02rc6/win64/nasm-2.16.02rc6-installer-x64.exe\"> nasm-2.16.02rc6</a>，其他版本选择点击<a href=\"https://www.nasm.us/pub/nasm/releasebuilds\">这里</a></p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2024/png/26634545/1704272184220-9e9a3c78-f713-4c5e-ac47-d953d32b9b6c.png#averageHue=%23f8f0ef&amp;clientId=u5ba02b39-7ceb-4&amp;from=paste&amp;height=98&amp;id=u873f167a&amp;originHeight=147&amp;originWidth=1018&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=35233&amp;status=done&amp;style=none&amp;taskId=uf20b23dd-d83a-4aad-8df8-6167647b80a&amp;title=&amp;width=678.6666666666666\" alt=\"image.png\"></p>\n<h2 id=\"下载-node-源码\"><a class=\"markdownIt-Anchor\" href=\"#下载-node-源码\">#</a> 下载 Node 源码</h2>\n<p>官方教程使用 Git Bash 来进行下载，<a href=\"https://git-scm.com/download/win\"> Git for Windows</a> 下载安装。记得配置环境变量。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/nodejs/node.git</span><br><span class=\"line\">cd node</span><br></pre></td></tr></table></figure>\n<p>由于 node 源码 400m 比较大，我选择进入<a href=\"https://nodejs.org/en/download/\"> Nodejs 官网</a>进行源码下载，当然使用你喜欢的方式即可。</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2024/png/26634545/1704273537999-f71a2be0-54f9-463b-aa21-aa82b1e13aaf.png#averageHue=%23faf9f9&amp;clientId=u5ba02b39-7ceb-4&amp;from=paste&amp;height=705&amp;id=u94fc557b&amp;originHeight=1057&amp;originWidth=1791&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=149833&amp;status=done&amp;style=none&amp;taskId=u7d9819c3-fefa-4269-bb68-5450930f849&amp;title=&amp;width=1194\" alt=\"image.png\"></p>\n<h2 id=\"build-node\"><a class=\"markdownIt-Anchor\" href=\"#build-node\">#</a> Build Node</h2>\n<p>进入到 node 源码根目录，例如我这里需要进入到 <code>nodes/node-v20.10.0</code> <br>\n<img src=\"https://cdn.nlark.com/yuque/0/2024/png/26634545/1704272480903-a4072940-1d9a-4ae7-a0da-3b8b34a56cfc.png#averageHue=%232a2c2f&amp;clientId=u5ba02b39-7ceb-4&amp;from=paste&amp;height=564&amp;id=ue8b55729&amp;originHeight=846&amp;originWidth=847&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=73957&amp;status=done&amp;style=none&amp;taskId=u6a26f812-9cf3-4eac-88af-a8bd2d93d79&amp;title=&amp;width=564.6666666666666\" alt=\"image.png\"></p>\n<p><strong>开始构建</strong></p>\n<blockquote>\n<p>构建后会在<strong> Release</strong> 文件夹下生成构建好的<strong> node.exe</strong> 文件</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.\\vcbuild</span><br></pre></td></tr></table></figure>\n<p><strong>进行测试</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.\\vcbuild test</span><br></pre></td></tr></table></figure>\n<p><strong>测试 Node.js 是否正确构建</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Release\\node -e &quot;console.log(&#x27;Hello from Node.js&#x27;, process.version)&quot;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "nodejs",
                "build"
            ]
        }
    ]
}