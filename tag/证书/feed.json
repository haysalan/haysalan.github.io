{
    "version": "https://jsonfeed.org/version/1",
    "title": "Faceless Blog • All posts by \"证书\" tag",
    "description": "数据采集、逆向安全、网络杂谈",
    "home_page_url": "https://haysalan.github.io",
    "items": [
        {
            "id": "https://haysalan.github.io/posts/42317.html",
            "url": "https://haysalan.github.io/posts/42317.html",
            "title": "android证书安装与校验相关解决办法",
            "date_published": "2023-12-25T06:17:05.000Z",
            "content_html": "<h1 id=\"android-安装证书\"><a class=\"markdownIt-Anchor\" href=\"#android-安装证书\">#</a> Android 安装证书</h1>\n<h2 id=\"magisk-安装证书插件推荐\"><a class=\"markdownIt-Anchor\" href=\"#magisk-安装证书插件推荐\">#</a> Magisk 安装证书插件（推荐）</h2>\n<p>Magisk 中安装插件并<strong>重启</strong>，在手机<strong>设置</strong>安全中<strong>正常手动安装</strong>证书至<strong>用户证书</strong>，接着<strong>重启</strong>手机用户证书则会<strong>移动至系统</strong>证书。<br>\n<a href=\"https://www.yuque.com/attachments/yuque/0/2023/zip/26634545/1703485160886-247fbe50-2bba-4cc0-a497-de50d632fce2.zip?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fzip%2F26634545%2F1703485160886-247fbe50-2bba-4cc0-a497-de50d632fce2.zip%22%2C%22name%22%3A%22Move_Certificates-v1.9.zip%22%2C%22size%22%3A6632%2C%22ext%22%3A%22zip%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u5964d71d-391f-441d-b906-9b9861b2cf1%22%2C%22taskType%22%3A%22transfer%22%2C%22type%22%3A%22application%2Fx-zip-compressed%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22G2ubz%22%2C%22card%22%3A%22file%22%7D\">Move_Certificates-v1.9.zip</a></p>\n<h2 id=\"shell-命令安装\"><a class=\"markdownIt-Anchor\" href=\"#shell-命令安装\">#</a> Shell 命令安装</h2>\n<p><strong>操作证书相关命令</strong>（kali 自带 openssl）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看crt\\der格式证书</span></span><br><span class=\"line\">openssl x509 -in FiddlerRoot.crt -inform DER -noout -text</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看pem证书</span></span><br><span class=\"line\">openssl x509 -in certificate.pem -inform pem -noout -text</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">crt/der转pem</span></span><br><span class=\"line\">openssl x509 -in FiddlerRoot.crt -inform DER -out certificate.pem -outform PEM</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">pem转der/crt</span></span><br><span class=\"line\">openssl x509 -in certificate.pem -inform PEM -out FiddlerRoot.der -outform DER</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">计算pem证书<span class=\"built_in\">hash</span>值</span></span><br><span class=\"line\">openssl x509 -subject_hash_old -in Desktop.pem</span><br></pre></td></tr></table></figure>\n<p>导入到系统前需要<strong>重命名</strong>证书 <strong>hash 值.0 -&gt; xxxx.0</strong>。如果存在文件名<strong>冲突</strong>，则可将 <code>.0</code>  改为 <code>.1</code>  或 <code>.2</code>  等等。<br>\n<strong>新开</strong>一个 <code>cmd</code>  执行以下命令</p>\n<blockquote>\n<p><strong>hash</strong> 值通过<strong> pem</strong> 证书计算得到（上面最后一条指令）</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb root</span><br><span class=\"line\">adb remount</span><br><span class=\"line\">adb push xxxxxxx.0 /system/etc/security/cacerts/</span><br><span class=\"line\">adb shell</span><br><span class=\"line\">cd /system/etc/security/cacerts/</span><br><span class=\"line\">chmod 644 xxxxxxx.0</span><br><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "证书",
                "magisk"
            ]
        }
    ]
}