{
    "version": "https://jsonfeed.org/version/1",
    "title": "Faceless Blog • All posts by \"magisk\" tag",
    "description": "数据采集、逆向安全、网络杂谈",
    "home_page_url": "https://haysalan.github.io",
    "items": [
        {
            "id": "https://haysalan.github.io/posts/42317.html",
            "url": "https://haysalan.github.io/posts/42317.html",
            "title": "android证书安装与校验相关解决办法",
            "date_published": "2023-12-25T06:17:05.000Z",
            "content_html": "<h1 id=\"android-安装证书\"><a class=\"markdownIt-Anchor\" href=\"#android-安装证书\">#</a> Android 安装证书</h1>\n<h2 id=\"magisk-安装证书插件推荐\"><a class=\"markdownIt-Anchor\" href=\"#magisk-安装证书插件推荐\">#</a> Magisk 安装证书插件（推荐）</h2>\n<p>Magisk 中安装插件并<strong>重启</strong>，在手机<strong>设置</strong>安全中<strong>正常手动安装</strong>证书至<strong>用户证书</strong>，接着<strong>重启</strong>手机用户证书则会<strong>移动至系统</strong>证书。<br>\n<a href=\"https://www.yuque.com/attachments/yuque/0/2023/zip/26634545/1703485160886-247fbe50-2bba-4cc0-a497-de50d632fce2.zip?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fzip%2F26634545%2F1703485160886-247fbe50-2bba-4cc0-a497-de50d632fce2.zip%22%2C%22name%22%3A%22Move_Certificates-v1.9.zip%22%2C%22size%22%3A6632%2C%22ext%22%3A%22zip%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u5964d71d-391f-441d-b906-9b9861b2cf1%22%2C%22taskType%22%3A%22transfer%22%2C%22type%22%3A%22application%2Fx-zip-compressed%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22G2ubz%22%2C%22card%22%3A%22file%22%7D\">Move_Certificates-v1.9.zip</a></p>\n<h2 id=\"shell-命令安装\"><a class=\"markdownIt-Anchor\" href=\"#shell-命令安装\">#</a> Shell 命令安装</h2>\n<p><strong>操作证书相关命令</strong>（kali 自带 openssl）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看crt\\der格式证书</span></span><br><span class=\"line\">openssl x509 -in FiddlerRoot.crt -inform DER -noout -text</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看pem证书</span></span><br><span class=\"line\">openssl x509 -in certificate.pem -inform pem -noout -text</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">crt/der转pem</span></span><br><span class=\"line\">openssl x509 -in FiddlerRoot.crt -inform DER -out certificate.pem -outform PEM</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">pem转der/crt</span></span><br><span class=\"line\">openssl x509 -in certificate.pem -inform PEM -out FiddlerRoot.der -outform DER</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">计算pem证书<span class=\"built_in\">hash</span>值</span></span><br><span class=\"line\">openssl x509 -subject_hash_old -in Desktop.pem</span><br></pre></td></tr></table></figure>\n<p>导入到系统前需要<strong>重命名</strong>证书 <strong>hash 值.0 -&gt; xxxx.0</strong>。如果存在文件名<strong>冲突</strong>，则可将 <code>.0</code>  改为 <code>.1</code>  或 <code>.2</code>  等等。<br>\n<strong>新开</strong>一个 <code>cmd</code>  执行以下命令</p>\n<blockquote>\n<p><strong>hash</strong> 值通过<strong> pem</strong> 证书计算得到（上面最后一条指令）</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb root</span><br><span class=\"line\">adb remount</span><br><span class=\"line\">adb push xxxxxxx.0 /system/etc/security/cacerts/</span><br><span class=\"line\">adb shell</span><br><span class=\"line\">cd /system/etc/security/cacerts/</span><br><span class=\"line\">chmod 644 xxxxxxx.0</span><br><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "证书",
                "magisk"
            ]
        },
        {
            "id": "https://haysalan.github.io/posts/45467.html",
            "url": "https://haysalan.github.io/posts/45467.html",
            "title": "android逆向分析环境配置",
            "date_published": "2023-12-20T02:49:06.000Z",
            "content_html": "<h1 id=\"资源文件\"><a class=\"markdownIt-Anchor\" href=\"#资源文件\">#</a> 资源文件</h1>\n<p><a href=\"https://www.yuque.com/attachments/yuque/0/2023/zip/26634545/1703052470975-a479d323-df18-42ff-853f-276c2131959a.zip?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fzip%2F26634545%2F1703052470975-a479d323-df18-42ff-853f-276c2131959a.zip%22%2C%22name%22%3A%22adb-fastboot.zip%22%2C%22size%22%3A3765786%2C%22ext%22%3A%22zip%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u7cda5742-2eb3-451d-b580-34c5f297476%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fx-zip-compressed%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22KebVn%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D\">adb-fastboot.zip</a></p>\n<h1 id=\"获取-root-权限\"><a class=\"markdownIt-Anchor\" href=\"#获取-root-权限\">#</a> 获取 root 权限</h1>\n<h2 id=\"magisk\"><a class=\"markdownIt-Anchor\" href=\"#magisk\">#</a> Magisk</h2>\n<p>magisk 中文网：<a href=\"https://magiskcn.com/\">https://magiskcn.com/</a><br>\nmagisk 官网：<a href=\"https://magiskmanager.com/\">https://magiskmanager.com/</a></p>\n<h3 id=\"环境\"><a class=\"markdownIt-Anchor\" href=\"#环境\">#</a> 环境</h3>\n<ul>\n<li>解锁 Bootloader</li>\n<li>提取 boot.img (卡刷包中有)</li>\n<li>PC 端<strong> adb-fastboot</strong> 环境</li>\n</ul>\n<p>修补 boot.img<br>\n<img src=\"https://cdn.nlark.com/yuque/0/2023/gif/26634545/1703052109455-296af09d-fccf-4099-82e3-7dae58f608de.gif#averageHue=%23eeedee&amp;clientId=ue2fcaaf7-e91c-4&amp;from=drop&amp;id=ude4dd989&amp;originHeight=1228&amp;originWidth=591&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=4240369&amp;status=done&amp;style=none&amp;taskId=u50b904ac-b0b4-4a7d-ad2f-b12e0d4fe07&amp;title=\" alt=\"PixPin_2023-12-20_09-51-40.gif\"></p>\n<h1 id=\"安装证书\"><a class=\"markdownIt-Anchor\" href=\"#安装证书\">#</a> 安装证书</h1>\n<p>安装证书详细步骤：<a href=\"/posts/42317.html\">android 证书安装与校验相关解决办法</a></p>\n<h1 id=\"问题记录\"><a class=\"markdownIt-Anchor\" href=\"#问题记录\">#</a> 问题记录</h1>\n<h2 id=\"小米-8-写入-boot-报错\"><a class=\"markdownIt-Anchor\" href=\"#小米-8-写入-boot-报错\">#</a> 小米 8 写入 boot 报错</h2>\n<h3 id=\"write-to-device-failed-invalid-argument\"><a class=\"markdownIt-Anchor\" href=\"#write-to-device-failed-invalid-argument\">#</a> Write to device failed (Invalid argument)</h3>\n<p>报错详情 -&gt;** **<a href=\"https://blog.csdn.net/qq_39441603/article/details/124679556\"> 原文地址</a></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">D:\\user\\Downloads\\adb-fastboot&gt;fastboot flash boot magisk_patched-26400_QSOWo.img</span><br><span class=\"line\">Warning: skip copying boot image avb footer (boot partition size: 0, boot image size: 45851946).</span><br><span class=\"line\">Sending &#x27;boot&#x27; (44777 KB)                          FAILED (Write to device failed (Invalid argument))</span><br><span class=\"line\">fastboot: error: Command failed</span><br></pre></td></tr></table></figure>\n<p>新建文件 <code>txt</code>  文件粘贴代码块内容，保存后修改后缀为 <code>bat</code> ，以管理员方式运行。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@echo off</span><br><span class=\"line\">reg add &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\usbflags\\18D1D00D0100&quot; /v &quot;osvc&quot; /t REG_BINARY /d &quot;0000&quot; /f</span><br><span class=\"line\">reg add &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\usbflags\\18D1D00D0100&quot; /v &quot;SkipContainerIdQuery&quot; /t REG_BINARY /d &quot;01000000&quot; /f</span><br><span class=\"line\">reg add &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\usbflags\\18D1D00D0100&quot; /v &quot;SkipBOSDescriptorQuery&quot; /t REG_BINARY /d &quot;01000000&quot; /f</span><br><span class=\"line\"></span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>执行完后，执行写入 boot 成功。<br>\n<img src=\"https://cdn.nlark.com/yuque/0/2023/png/26634545/1703040985764-924bd56a-4821-4b6f-afc5-67df9f4fe391.png#averageHue=%231d1d1d&amp;clientId=ucd4155a3-2258-4&amp;from=paste&amp;height=82&amp;id=u3ba72421&amp;originHeight=123&amp;originWidth=1140&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=19723&amp;status=done&amp;style=none&amp;taskId=uff1395f0-22ae-459a-967d-4eadd322f82&amp;title=&amp;width=760\" alt=\"image.png\"></p>\n",
            "tags": [
                "magisk",
                "andorid",
                "fastboot",
                "root"
            ]
        }
    ]
}