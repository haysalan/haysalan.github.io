{
    "version": "https://jsonfeed.org/version/1",
    "title": "Faceless Blog • All posts by \"jnitrace\" tag",
    "description": "数据采集、逆向安全、网络杂谈",
    "home_page_url": "https://haysalan.github.io",
    "items": [
        {
            "id": "https://haysalan.github.io/posts/8117.html",
            "url": "https://haysalan.github.io/posts/8117.html",
            "title": "Frida三板斧的安装配置与基本使用",
            "date_published": "2023-12-18T07:59:47.000Z",
            "content_html": "<h1 id=\"frida\"><a class=\"markdownIt-Anchor\" href=\"#frida\">#</a> Frida</h1>\n<p>面向开发人员、逆向工程师和安全研究人员的动态检测工具包。<br>\nfrida 文档：<a href=\"https://frida.re/docs/home/\">https://frida.re/docs/home/</a></p>\n<h2 id=\"对应版本\"><a class=\"markdownIt-Anchor\" href=\"#对应版本\">#</a> 对应版本</h2>\n<p>frida&amp;frida-tools 版本对应查看 ：<a href=\"https://github.com/frida/frida/releases\">frida-releases</a><br>\n 找到你使用 frida 的版本，查看其版本下<strong> frida-tools</strong> 的版本，它们就是对应版本。（建议多准备几个 Python 与 firda 的版本，因为它并不稳定）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install frida==14.2.13</span><br><span class=\"line\">pip install frida-tools==9.2.1</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2023/gif/26634545/1702889862515-455c0fb7-9dc7-4854-a6d6-c94c36b24e9e.gif#averageHue=%23fcfbfb&amp;clientId=ua9a61f28-e353-4&amp;from=drop&amp;id=u694dfb9e&amp;originHeight=1363&amp;originWidth=2038&amp;originalType=binary%E2%88%B6=1.5&amp;rotation=0&amp;showTitle=false&amp;size=5812512&amp;status=done&amp;style=none&amp;taskId=u5b43f4cc-ded4-442f-9e7d-b7f790a8823&amp;title=\" alt=\"PixPin_2023-12-18_16-57-12.gif\"></p>\n<h2 id=\"frida-server\"><a class=\"markdownIt-Anchor\" href=\"#frida-server\">#</a> frida-server</h2>\n<p>安卓手机需要安装 frida-server，版本与 frida<strong> 版本需一致</strong>，根据<strong>设备架构</strong>选择 x86 或 arm 等。<br>\n<strong>解压文件</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">7x x frida-server.xz</span><br></pre></td></tr></table></figure>\n<p><strong>启动 frida-server</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb root</span><br><span class=\"line\">adb push frida-server /data/local/tmp/</span><br><span class=\"line\">adb shell &quot;chmod 755 /data/local/tmp/frida-server&quot;</span><br><span class=\"line\">adb shell &quot;/data/local/tmp/frida-server&quot;</span><br></pre></td></tr></table></figure>\n<p><strong>测试服务</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">frida-ps -U  // 查看正在运行进程</span><br></pre></td></tr></table></figure>\n<p>显示如下内容则表示服务启动，手机<strong>重启</strong>后<strong>需</strong>要<strong>再次</strong>执行命令<strong>启动</strong>。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  PID NAME</span><br><span class=\"line\"> 1590 com.xxx.xxx</span><br><span class=\"line\">13194 com.xxxx.xxxxx</span><br><span class=\"line\">…</span><br></pre></td></tr></table></figure>\n<h2 id=\"常用命令\"><a class=\"markdownIt-Anchor\" href=\"#常用命令\">#</a> 常用命令</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">frida -FU packagename -l hookscript.js</span><br></pre></td></tr></table></figure>\n<h1 id=\"jnitrace\"><a class=\"markdownIt-Anchor\" href=\"#jnitrace\">#</a> Jnitrace</h1>\n<p>JNItrace 是一个基于 Frida 框架的<strong> Hook jni</strong> 方法的库。<a href=\"https://github.com/chame1eon/jnitrace\">https://github.com/chame1eon/jnitrace</a><br>\nPython <strong>安装</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install jnitrace   <span class=\"comment\">// 需要frida版本14以上</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"依赖\"><a class=\"markdownIt-Anchor\" href=\"#依赖\">#</a> 依赖：</h2>\n<ul>\n<li>arm、arm64、x86 或 x64 Android 设备</li>\n<li>Frida 安装在 Android 设备上</li>\n<li>Frida 支持 &gt; 14</li>\n<li>使用 Python 3 和 pip 的 Linux、Mac 或 Windows 主机</li>\n</ul>\n<h2 id=\"启动命令\"><a class=\"markdownIt-Anchor\" href=\"#启动命令\">#</a> 启动命令：</h2>\n<p>两个参数分别为<strong>待分析的 SO</strong> 与<strong> APP 包名</strong>。-l 参数可以多次使用  <code>-l libname.so -l libname1.so ...</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jnitrace -l libname.so packagename</span><br></pre></td></tr></table></figure>\n<p>默认使用  <code>spawn</code>  启动，可以通过  <code>-m attach</code>  设置通过  <code>attach</code>  启。</p>\n<figure class=\"highlight latex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jnitrace -m attach -l libname.so packagename</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>&gt;&gt;</code>  导出 log 日志保存至文件，控制台将不输出 log。<br>\n例： <code>jnitrace -l libname packagename &gt;&gt; jnitrace.txt</code></p>\n</blockquote>\n<h1 id=\"objection\"><a class=\"markdownIt-Anchor\" href=\"#objection\">#</a> objection</h1>\n<h1 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h1>\n<p>官方安装教程：<a href=\"https://github.com/sensepost/objection/wiki/Installation\">https://github.com/sensepost/objection/wiki/Installation</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install -U objection</span><br></pre></td></tr></table></figure>\n<p>在内存中所有已加载的类中搜索包含特定关键词的类</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android hooking search classes</span><br></pre></td></tr></table></figure>\n<p>hook java 方法</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android hooking watch class_method &lt;methodName&gt;</span><br></pre></td></tr></table></figure>\n<p>hook java 类</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android hooking watch class &lt;classname&gt;</span><br></pre></td></tr></table></figure>\n<p>列出进程所有的 activity</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android hooking list activities</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "frida",
                "jnitrace",
                "objection"
            ]
        }
    ]
}